<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Security Pro</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }

        .hero-section {
            background: var(--primary-gradient);
            padding: 4rem 1.5rem;
            border-radius: 0 0 20px 20px;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin: 1.5rem 0;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        .password-input {
            padding-right: 3.5rem;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .strength-bar {
            height: 8px;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.2rem;
            padding: 1.5rem 0;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem;
            border-radius: 8px;
            background: #f8f9fa;
            transition: all 0.2s ease;
            border: 1px solid #e9ecef;
        }

        .option-item:hover {
            background: #ffffff;
            border-color: #ced4da;
            transform: translateY(-2px);
        }

        .length-warning {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <section class="hero-section">
        <div class="container">
            <h1 class="title has-text-centered has-text-white mb-4">Password Security Pro</h1>
            <p class="subtitle has-text-centered has-text-white-ter">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑ –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π</p>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <!-- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π -->
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 has-text-grey-dark">üé≤ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</h2>
                    
                    <div class="field">
                        <label class="label">–î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è</label>
                        <div class="control has-icons-right">
                            <input class="input" type="number" id="length" min="4" max="100" value="12" 
                                   oninput="validateLength(this)">
                            <span class="icon is-right">
                                <i class="fas fa-ruler-horizontal"></i>
                            </span>
                        </div>
                        <p class="help is-danger length-warning" id="length-warning" hidden>
                            ‚ö†Ô∏è –î–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤
                        </p>
                    </div>

                    <div class="options-grid">
                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_LOWERCASE" checked>
                            <span class="has-text-weight-semibold">a-z</span> –°—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã
                        </label>
                        
                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_UPPERCASE">
                            <span class="has-text-weight-semibold">A-Z</span> –ó–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã
                        </label>

                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_DIGITS" checked>
                            <span class="has-text-weight-semibold">0-9</span> –¶–∏—Ñ—Ä—ã
                        </label>

                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_SPECIAL">
                            <span class="has-text-weight-semibold">!@#</span> –°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
                        </label>

                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_NO_DIGITS">
                            <span class="icon has-text-danger"><i class="fas fa-ban"></i></span> –ë–µ–∑ —Ü–∏—Ñ—Ä
                        </label>

                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_AVOID_SIMILAR">
                            <span class="icon has-text-info"><i class="fas fa-eye-slash"></i></span> –ò—Å–∫–ª—é—á–∏—Ç—å –ø–æ—Ö–æ–∂–∏–µ
                        </label>

                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_SEPARATORS">
                            <span class="icon has-text-success"><i class="fas fa-grip-lines"></i></span> –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏
                        </label>

                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_NO_REPEAT">
                            <span class="icon has-text-warning"><i class="fas fa-repeat"></i></span> –ë–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤
                        </label>

                        <label class="checkbox option-item">
                            <input type="checkbox" class="option" value="OPT_RANDOM_CASE">
                            <span class="icon has-text-primary"><i class="fas fa-random"></i></span> –°–ª—É—á–∞–π–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä
                        </label>
                    </div>

                    <div class="buttons is-justify-content-center mt-5">
                        <button class="button is-primary is-rounded has-text-weight-bold" 
                                onclick="generatePassword()">
                            –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>

                    <div class="field has-addons">
                        <div class="control is-expanded">
                            <input class="input password-input" 
                                   type="text" 
                                   id="generated-password" 
                                   readonly
                                   placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å">
                        </div>
                        <div class="control">
                            <button class="button is-info is-rounded" 
                                    onclick="copyPassword()"
                                    title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å">
                                <span class="icon"><i class="fas fa-copy"></i></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è -->
            <div class="card">
                <div class="card-content">
                    <h2 class="title is-4 has-text-grey-dark">üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è</h2>
                    
                    <div class="field">
                        <div class="control has-icons-right">
                            <input class="input password-input" 
                                   type="password" 
                                   id="check-password" 
                                   placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏"
                                   oninput="checkPasswordDebounced()">
                            <span class="icon is-right toggle-password" 
                                  onclick="togglePasswordVisibility()"
                                  style="pointer-events: all; cursor: pointer">
                                <i class="fas fa-eye"></i>
                            </span>
                        </div>
                    </div>

                    <div id="result">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        const API_URLS = {
            GENERATE: '/generate',
            CHECK: '/check'
        };

        const optionsMap = {
            'OPT_LOWERCASE': 1 << 0,
            'OPT_UPPERCASE': 1 << 1,
            'OPT_DIGITS': 1 << 2,
            'OPT_SPECIAL': 1 << 3,
            'OPT_NO_DIGITS': 1 << 4,
            'OPT_SEPARATORS': 1 << 5,
            'OPT_FULLASCII': 1 << 6,
            'OPT_AVOID_SIMILAR': 1 << 7,
            'OPT_NO_REPEAT': 1 << 8,
            'OPT_RANDOM_CASE': 1 << 9,
            'OPT_CUSTOM_CHARSET': 1 << 10,
            'OPT_LANGUAGE_SPECIFIC': 1 << 11,
            'OPT_OUTPUT_FORMAT': 1 << 12
        };

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª—è
        function validateLength(input) {
            const warning = document.getElementById('length-warning');
            warning.hidden = input.value >= 8;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è
        async function generatePassword() {
            try {
                const options = Array.from(document.querySelectorAll('.option:checked'))
                    .map(checkbox => checkbox.value)
                    .reduce((acc, val) => acc | optionsMap[val], 0);

                const length = parseInt(document.getElementById('length').value) || 12;

                const response = await fetch(API_URLS.GENERATE, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        length, 
                        options: Object.keys(optionsMap).filter(key => (options & optionsMap[key]) !== 0) 
                    })
                });

                const data = await response.json();
                if (!response.ok) throw new Error(data.error || '–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏');
                
                document.getElementById('generated-password').value = data.password;
                showNotification('–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!', 'is-success');

            } catch (error) {
                showNotification(error.message, 'is-danger');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
        const checkPasswordDebounced = debounce(checkPassword, 500);

        async function checkPassword() {
            try {
                const password = document.getElementById('check-password').value;
                if (!password) return;

                const response = await fetch(API_URLS.CHECK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password })
                });

                const result = await response.json();
                if (!response.ok) throw new Error(result.error || '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏');
                
                displayCheckResult(result);

            } catch (error) {
                showNotification(error.message, 'is-danger');
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏
        function displayCheckResult(result) {
            const strengthColors = {
                '–°–ª–∞–±—ã–π': 'is-danger',
                '–°—Ä–µ–¥–Ω–∏–π': 'is-warning',
                '–ù–∞–¥–µ–∂–Ω—ã–π': 'is-success',
                '–û—á–µ–Ω—å –Ω–∞–¥–µ–∂–Ω—ã–π': 'is-primary',
                '–£–ª—å—Ç—Ä–∞ –Ω–∞–¥–µ–∂–Ω—ã–π': 'is-info'
            };

            const strengthBar = `
                <div class="strength-bar-container mb-4">
                    <div class="strength-bar ${strengthColors[result.strength]}" 
                         style="width: ${result.strength * 20}%"></div>
                </div>
            `;

            const resultHTML = `
                <div class="notification ${strengthColors[result.strength]}">
                    ${strengthBar}
                    <h4 class="title is-5 mb-3">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</h4>
                    
                    <div class="content">
                        <p><strong>–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:</strong> ${result.strength}</p>
                        <p><strong>–≠–Ω—Ç—Ä–æ–ø–∏—è:</strong> ${result.entropy} –±–∏—Ç</p>
                        <p><strong>–í—Ä–µ–º—è –≤–∑–ª–æ–º–∞:</strong> ${formatTime(result.time_to_crack)}</p>
                        <p><strong>–£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö:</strong> ${result.compromised ? '‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞' : '‚úÖ –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞'}</p>
                        
                        ${result.warnings.length ? `
                        <div class="mt-3">
                            <p class="has-text-weight-bold">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:</p>
                            <ul class="mt-1">${result.warnings.map(w => `<li>‚Ä¢ ${w}</li>`).join('')}</ul>
                        </div>` : ''}
                        
                        <div class="mt-3">
                            <p class="has-text-weight-bold">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</p>
                            <p class="has-text-grey-dark">${result.recommendation}</p>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('result').innerHTML = resultHTML;
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function debounce(func, timeout = 300) {
            let timer;
            return (...args) => {
                clearTimeout(timer);
                timer = setTimeout(() => { func.apply(this, args); }, timeout);
            };
        }

        function copyPassword() {
            const passField = document.getElementById('generated-password');
            navigator.clipboard.writeText(passField.value).then(() => {
                showNotification('–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!', 'is-success');
            });
        }

        function togglePasswordVisibility() {
            const passField = document.getElementById('check-password');
            const icon = document.querySelector('.toggle-password i');
            passField.type = passField.type === 'password' ? 'text' : 'password';
            icon.classList.toggle('fa-eye-slash');
        }

        function formatTime(seconds) {
            if (seconds < 1) return '–º–≥–Ω–æ–≤–µ–Ω–Ω–æ';
            const units = [
                {name: '–ª–µ—Ç', div: 31536000},
                {name: '–º–µ—Å—è—Ü–µ–≤', div: 2592000},
                {name: '–¥–Ω–µ–π', div: 86400},
                {name: '—á–∞—Å–æ–≤', div: 3600},
                {name: '–º–∏–Ω—É—Ç', div: 60}
            ];
            
            for (const unit of units) {
                if (seconds >= unit.div) {
                    return `${Math.floor(seconds/unit.div)} ${unit.name}`;
                }
            }
            return `${Math.round(seconds)} —Å–µ–∫—É–Ω–¥`;
        }

        function showNotification(text, type = 'is-info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = text;
            
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
    </script>
</body>
</html>
